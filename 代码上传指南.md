# 智能电烤箱控制器 - 代码上传指南

## 📋 上传方法概述

由于当前环境缺少PlatformIO和Python，推荐使用以下方法上传代码到ESP8266设备：

## 🔧 方法1：使用Arduino IDE（推荐）

### 1. 安装Arduino IDE
1. 下载并安装 [Arduino IDE](https://www.arduino.cc/en/software)
2. 安装ESP8266开发板支持：
   - 打开Arduino IDE → 文件 → 首选项
   - 在"附加开发板管理器网址"中添加：`http://arduino.esp8266.com/stable/package_esp8266com_index.json`
   - 工具 → 开发板 → 开发板管理器 → 搜索"esp8266" → 安装

### 2. 配置开发板
- 工具 → 开发板 → NodeMCU 1.0 (ESP-12E Module)
- Flash Size: 4MB (FS:2MB OTA:~1019KB)
- Upload Speed: 115200
- Port: COM11（根据实际端口修改）

### 3. 安装必要库
- 项目 → 加载库 → 管理库
- 搜索并安装：
  - ESP8266WiFi
  - ESP8266WebServer
  - ESP8266HTTPUpdateServer

### 4. 上传代码
1. 打开 `src/SmartOvenController.ino`
2. 点击"上传"按钮（→）
3. 等待编译和上传完成

## 🔧 方法2：使用ESP8266 Flash Download Tool

### 1. 下载工具
- 下载 [ESP8266 Flash Download Tool](https://www.espressif.com/en/support/download/other-tools)

### 2. 配置烧录参数
```
开发板类型: ESP8266
SPI SPEED: 40MHz
SPI MODE: DIO
FLASH SIZE: 32Mbit-C1
BAUDRATE: 115200
```

### 3. 烧录固件地址
```
0x00000: boot_v1.7.bin
0x01000: user1.4096.new.6.bin
0x3FC000: esp_init_data_default.bin
0x3FE000: blank.bin
```

### 4. 开始烧录
1. 选择正确的COM端口
2. 点击"START"开始烧录
3. 等待烧录完成

## 🔧 方法3：使用PlatformIO（如果可用）

### 1. 安装PlatformIO
```bash
# 方法1：通过pip安装
pip install platformio

# 方法2：安装VS Code + PlatformIO插件
```

### 2. 编译和上传
```bash
# 进入项目目录
cd f:\Github\SmartOvenController

# 编译项目
pio run

# 上传到设备
pio run --target upload

# 监控串口输出
pio device monitor
```

## 📊 硬件连接指南

### ESP8266引脚连接
```
MAX6675模块:
- CLK → GPIO14 (D5)
- CS  → GPIO12 (D6) 
- DO  → GPIO13 (D7)

其他设备:
- 加热器 → GPIO5 (D1)
- 蜂鸣器 → GPIO4 (D2)
- LED指示灯 → GPIO2 (D4)
```

### 串口连接
- USB转TTL模块连接到ESP8266的TX/RX引脚
- 确保波特率设置为115200

## 🚨 常见问题排查

### 上传失败
1. **检查COM端口**：确认设备管理器中的正确端口
2. **检查驱动**：安装正确的CH340/CP2102驱动
3. **检查连接**：确保TX/RX连接正确
4. **重启设备**：尝试重新插拔USB

### 编译错误
1. **库依赖**：确保所有必要库已安装
2. **开发板选择**：确认选择了正确的ESP8266开发板
3. **代码语法**：检查代码是否有语法错误

### 运行问题
1. **串口监视器**：打开串口监视器查看调试信息
2. **电源供应**：确保设备供电充足
3. **硬件连接**：检查所有传感器和继电器连接

## 📞 技术支持

如果遇到问题，请参考项目中的文档：
- `故障排除指南.md`
- `设备使用说明.md` 
- `代码烧录指南.md`

或通过串口监视器查看详细的错误信息。